# 02. Ролевая модель и доступы (RBAC)

Система использует ролевую модель доступа (Role-Based Access Control).
Авторизация сотрудников происходит через Email/Password.
Авторизация опекунов (на чтение отчетов) происходит через Telegram Login или Magic Link.

## Матрица ролей

| Функционал / Модуль | Гость (Guest) | Волонтер (Volunteer) | Ст. Волонтер (Senior) | Админ (Admin) |
| :--- | :---: | :---: | :---: | :---: |
| **Животные** | | | | |
| Просмотр каталога | ✅ | ✅ | ✅ | ✅ |
| Создание карточки | ❌ | ❌ | ✅ | ✅ |
| Редактирование (свои) | ❌ | ✅ | ✅ | ✅ |
| Редактирование (чужие)| ❌ | ❌ | ✅ | ✅ |
| Смена статуса (Архив) | ❌ | ❌ | ✅ | ✅ |
| **Финансы & Сборы** | | | | |
| Донат | ✅ | ✅ | ✅ | ✅ |
| Создание сбора | ❌ | ❌ | ✅ | ✅ |
| Просмотр транзакций | ✅ (Публичные) | ❌ | ✅ (Все) | ✅ (Все) |
| Выгрузка отчетов (PDF)| ❌ | ❌ | ✅ | ✅ |
| **Пользователи** | | | | |
| Регистрация | ❌ | ❌ | ❌ | ✅ (Создает вручную) |
| Бан (Blacklist) | ❌ | ❌ | ✅ | ✅ |
| Назначение ролей | ❌ | ❌ | ❌ | ✅ |
| **Заявки** | | | | |
| Подача заявки | ✅ | ❌ | ❌ | ❌ |
| Обработка заявок | ❌ | ✅ (Свои) | ✅ | ✅ |

## Детальное описание прав

### 1. Administrator (Админ)
**Владелец системы.**
* Имеет доступ `root`.
* Единственный, кто может создавать новых пользователей в админке (защита от несанкционированного доступа к системе).
* Видит полную финансовую аналитику.

### 2. Senior Volunteer (Старший волонтер)
**Операционный менеджер.**
* Доверенное лицо. Может подменять админа в рутине.
* Может редактировать карточку любого животного (например, исправить ошибку новичка).
* Отвечает за создание "Срочных сборов" и новостей.
* Модерирует "Черный список" (добавляет туда телефоны и краткое описание человека).

### 3. Volunteer (Волонтер)
**Линейный сотрудник.**
* Работает "в поле".
* Может редактировать только тех животных, к которым привязан как "Куратор".
* Загружает фото, пишет текстовые отчеты ("Шарик сегодня поел").
* Обрабатывает заявки на знакомство только по своим подопечным.

### 4. Guardian (Опекун)
**Клиент с подпиской.**
* Роль "только чтение" в закрытой части (через отчеты через Telegram-бота).
* Не имеет доступа в Админ-панель.
* Получает контент, предназначенный для его `subscription_id`.